import{a as te,b as ie,d as ne,e as oe}from"./chunk-LY44IPX2.js";import{Da as G,E as r,F as o,G as b,Ga as V,Ha as J,Ia as K,K as L,O as f,Oa as Q,Va as W,Wa as X,X as R,Ya as Y,_a as Z,bb as ee,c as k,ia as E,ja as z,ka as M,l as D,m as C,ma as U,na as j,oa as $,pa as q,q as N,qa as B,ra as H,v as p,w as g,x as h,y as d,ya as O}from"./chunk-IJ2NUXZ7.js";import"./chunk-5KK65VHC.js";import"./chunk-7KGURMOZ.js";import"./chunk-KLFTJJ6R.js";import"./chunk-HYKU3UWQ.js";import"./chunk-IWMO5IXQ.js";import"./chunk-RKNHQKOL.js";import"./chunk-EJTOQN7U.js";import"./chunk-4U6PRYVA.js";import"./chunk-FXFZIWDD.js";import"./chunk-CSG5OQLY.js";import"./chunk-VMHM3MLJ.js";import"./chunk-QXLGPNHK.js";import"./chunk-AHWCWOS7.js";import"./chunk-42C7ZIID.js";import{g as F}from"./chunk-7QKZJC6O.js";function re(u,a){u&1&&(r(0,"ion-note",10),f(1," \u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19 (\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22 4 \u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23) "),o())}function le(u,a){u&1&&(r(0,"ion-note",10),f(1," \u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E2A\u0E32\u0E02\u0E32 "),o())}function ae(u,a){u&1&&(r(0,"ion-note",10),f(1," \u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D (\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22 2 \u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23) "),o())}function se(u,a){u&1&&(r(0,"ion-note",10),f(1," \u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E19\u0E32\u0E21\u0E2A\u0E01\u0E38\u0E25 (\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22 2 \u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23) "),o())}function Ee(u,a){u&1&&(r(0,"ion-note",10),f(1," \u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E48\u0E19 "),o())}var ue=(()=>{let a=class a{constructor(e,n,i,s,l,t){this._fb=e,this._alertCtrl=n,this._toastCtrl=i,this._lineLiffService=s,this._userActive=l,this._authService=t,this._unsubscribeAll=new k}ngOnInit(){var e;this.registerForm=this._fb.group({empId:["",[E.required,E.minLength(4)]],branch:["",[E.required,E.minLength(4)]],firstname:["",[E.required,E.minLength(2)]],lastname:["",[E.required,E.minLength(2)]],nickname:["",[E.required,E.minLength(2)]]}),te.production&&!((e=this.userProfile)!=null&&e.id)&&this._lineLiffService.InitLine("2007900555-9ypO313N").then(n=>{setTimeout(()=>{console.log("::-State-::",n,"----",this.userProfile),this.lineProfile=n},1e3)})}get userProfile(){return this._userActive.activeUser}confirmRegister(){return F(this,null,function*(){this.registerForm.valid&&(console.log("\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19",this.registerForm.value),(yield this._alertCtrl.create({header:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19",subHeader:"\u0E04\u0E38\u0E13\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E43\u0E0A\u0E48\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48",buttons:[{text:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",role:"cancel"},{text:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19",role:"confirm",handler:()=>this.setUser()}]})).present())})}setUser(){return F(this,null,function*(){var m,c,_,y,x,I,v,S,A,T,w,P;console.log("this.lineProfile",this.lineProfile);let e=this.registerForm.value,n=(c=(m=e==null?void 0:e.firstname)==null?void 0:m.trim())!=null?c:" ",i=(y=(_=e==null?void 0:e.lastname)==null?void 0:_.trim())!=null?y:" ",s="".concat(n," ").concat(i),l={id:(x=this.userProfile)==null?void 0:x.id,branch:(I=e==null?void 0:e.branch)==null?void 0:I.trim(),nickname:(v=e==null?void 0:e.nickname)==null?void 0:v.trim(),firstName:n,lastName:i,userId:(S=this.lineProfile)==null?void 0:S.accountId,empId:(A=e==null?void 0:e.empId)==null?void 0:A.trim()};console.log("param",l);let t=yield D(this._authService.setUser(l).pipe(C(this._unsubscribeAll)));console.log(":: setUser ::",t),t!=null&&t.data?(this._lineLiffService.sendFlexMessage([{type:"flex",altText:(T=this.userProfile)!=null&&T.firstname?"\u0E41\u0E01\u0E49\u0E44\u0E02\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E23\u0E30\u0E1A\u0E1A\u0E25\u0E07\u0E40\u0E27\u0E25\u0E32\u0E17\u0E33\u0E07\u0E32\u0E19":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E23\u0E30\u0E1A\u0E1A\u0E25\u0E07\u0E40\u0E27\u0E25\u0E32\u0E17\u0E33\u0E07\u0E32\u0E19",contents:{type:"bubble",body:{type:"box",layout:"vertical",contents:[{type:"box",layout:"horizontal",contents:[{type:"box",layout:"vertical",contents:[{type:"image",url:(w=this.userProfile)==null?void 0:w.image_profile,aspectMode:"cover",size:"full"}],cornerRadius:"100px",width:"64px",height:"64px"},{type:"box",layout:"vertical",contents:[{type:"text",contents:[{type:"span",text:(P=this.userProfile)!=null&&P.firstname?"\u0E41\u0E01\u0E49\u0E44\u0E02\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",weight:"bold",color:"#00b900"}],size:"sm",wrap:!0},{type:"text",text:s,size:"sm",wrap:!0},{type:"text",text:"".concat(this.datetimeTH(new Date().toISOString())," \u0E19."),size:"xxs",wrap:!0}],offsetTop:"4px"}],spacing:"xl",paddingAll:"20px"}],paddingAll:"0px"}}}]),this.presentToast("\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08!","success")):this.presentToast("\u0E2D\u0E38\u0E4A\u0E1A! \u0E21\u0E35\u0E1A\u0E32\u0E07\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14","danger")})}onRegister(){return F(this,null,function*(){var m,c,_,y,x,I,v,S,A;let e=this.registerForm.value,n=(c=(m=e==null?void 0:e.firstname)==null?void 0:m.trim())!=null?c:" ",i=(y=(_=e==null?void 0:e.lastname)==null?void 0:_.trim())!=null?y:" ",s="".concat(n," ").concat(i),l={firstName:n,lastName:i,userId:(x=this.lineProfile)==null?void 0:x.accountId,empId:(I=e==null?void 0:e.empId)==null?void 0:I.trim()};console.log("param",l);let t=yield D(this._authService.setUser(l).pipe(C(this._unsubscribeAll)));console.log(":: setUser ::",t),t!=null&&t.data?this._lineLiffService.sendFlexMessage([{type:"flex",altText:(v=t==null?void 0:t.data)!=null&&v.status?"\u0E41\u0E01\u0E49\u0E44\u0E02\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E23\u0E30\u0E1A\u0E1A\u0E08\u0E31\u0E14\u0E40\u0E01\u0E47\u0E1A\u0E43\u0E1A\u0E40\u0E2A\u0E23\u0E47\u0E08\u0E2B\u0E23\u0E37\u0E2D\u0E2D\u0E37\u0E48\u0E19\u0E46":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E23\u0E30\u0E1A\u0E1A\u0E08\u0E31\u0E14\u0E40\u0E01\u0E47\u0E1A\u0E43\u0E1A\u0E40\u0E2A\u0E23\u0E47\u0E08\u0E2B\u0E23\u0E37\u0E2D\u0E2D\u0E37\u0E48\u0E19\u0E46",contents:{type:"bubble",body:{type:"box",layout:"vertical",contents:[{type:"box",layout:"horizontal",contents:[{type:"box",layout:"vertical",contents:[{type:"image",url:(S=t==null?void 0:t.data)==null?void 0:S.image_profile,aspectMode:"cover",size:"full"}],cornerRadius:"100px",width:"64px",height:"64px"},{type:"box",layout:"vertical",contents:[{type:"text",contents:[{type:"span",text:(A=t==null?void 0:t.data)!=null&&A.status?"\u0E41\u0E01\u0E49\u0E44\u0E02\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08",weight:"bold",color:"#00b900"}],size:"sm",wrap:!0},{type:"text",text:s,size:"sm",wrap:!0},{type:"text",text:"".concat(this.datetimeTH(new Date().toISOString())," \u0E19."),size:"xxs",wrap:!0}],offsetTop:"4px"}],spacing:"xl",paddingAll:"20px"}],paddingAll:"0px"}}}]):this.presentToast("\u0E2D\u0E38\u0E4A\u0E1A! \u0E21\u0E35\u0E1A\u0E32\u0E07\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14","danger")})}presentToast(e,n="primary"){return F(this,null,function*(){(yield this._toastCtrl.create({message:e,duration:2e3,color:n,position:"bottom"})).present()})}datetimeTH(e){let n={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString("th",n)}};a.\u0275fac=function(n){return new(n||a)(g(q),g(Y),g(Z),g(oe),g(ie),g(ne))},a.\u0275cmp=N({type:a,selectors:[["app-register"]],standalone:!0,features:[R],decls:24,vars:7,consts:[["color","primary"],[1,"ion-padding"],[3,"formGroup"],["formControlName","empId","label","\u0E23\u0E2B\u0E31\u0E2A\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19","labelPlacement","stacked","placeholder","\u0E23\u0E2B\u0E31\u0E2A\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19"],["color","danger",4,"ngIf"],["formControlName","branch","label","\u0E2A\u0E32\u0E02\u0E32","labelPlacement","stacked","placeholder","\u0E2A\u0E32\u0E02\u0E32"],["formControlName","firstname","label","\u0E0A\u0E37\u0E48\u0E2D","labelPlacement","stacked","placeholder","\u0E0A\u0E37\u0E48\u0E2D"],["formControlName","lastname","label","\u0E19\u0E32\u0E21\u0E2A\u0E01\u0E38\u0E25","labelPlacement","stacked","placeholder","\u0E19\u0E32\u0E21\u0E2A\u0E01\u0E38\u0E25"],["formControlName","nickname","label","\u0E0A\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E48\u0E19","labelPlacement","stacked","placeholder","\u0E0A\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E48\u0E19"],["expand","block","type","submit",3,"click","disabled"],["color","danger"]],template:function(n,i){if(n&1&&(r(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),f(3,"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E40\u0E02\u0E49\u0E32\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"),o()()(),r(4,"ion-content",1)(5,"form",2)(6,"ion-item"),b(7,"ion-input",3),o(),h(8,re,2,0,"ion-note",4),r(9,"ion-item"),b(10,"ion-input",5),o(),h(11,le,2,0,"ion-note",4),r(12,"ion-item"),b(13,"ion-input",6),o(),h(14,ae,2,0,"ion-note",4),r(15,"ion-item"),b(16,"ion-input",7),o(),h(17,se,2,0,"ion-note",4),r(18,"ion-item"),b(19,"ion-input",8),o(),h(20,Ee,2,0,"ion-note",4),o()(),r(21,"ion-footer")(22,"ion-button",9),L("click",function(){return i.confirmRegister()}),f(23," \u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19 "),o()()),n&2){let s,l,t,m,c;p(5),d("formGroup",i.registerForm),p(3),d("ngIf",((s=i.registerForm.get("empId"))==null?null:s.invalid)&&((s=i.registerForm.get("empId"))==null?null:s.touched)),p(3),d("ngIf",((l=i.registerForm.get("branch"))==null?null:l.invalid)&&((l=i.registerForm.get("branch"))==null?null:l.touched)),p(3),d("ngIf",((t=i.registerForm.get("firstname"))==null?null:t.invalid)&&((t=i.registerForm.get("firstname"))==null?null:t.touched)),p(3),d("ngIf",((m=i.registerForm.get("lastname"))==null?null:m.invalid)&&((m=i.registerForm.get("lastname"))==null?null:m.touched)),p(3),d("ngIf",((c=i.registerForm.get("nickname"))==null?null:c.invalid)&&((c=i.registerForm.get("nickname"))==null?null:c.touched)),p(2),d("disabled",i.registerForm.invalid)}},dependencies:[K,G,O,Q,J,V,ee,X,W,B,U,z,M,H,j,$],styles:["ion-footer[_ngcontent-%COMP%]{position:absolute;background:#fff;bottom:0}"]});let u=a;return u})();var Se=[{path:"",component:ue}];export{Se as default};
